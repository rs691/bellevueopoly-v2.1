# Available Rewards Nearby - Visual Architecture & Flow Diagrams

## 1. Screen Layout Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                        â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚ Available Rewards Nearby        ğŸ§­ [Refresh]   â”‚  â•‘ â† AppBar
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                        â•‘
â•‘  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â•‘
â•‘  â•‘  ğŸ—ºï¸  GOOGLE MAP (40%)                           â•‘  â•‘
â•‘  â•‘                                                 â•‘  â•‘
â•‘  â•‘      ğŸ”µ User Location                          â•‘  â•‘
â•‘  â•‘                                                 â•‘  â•‘
â•‘  â•‘        ğŸ”´ Business 1                           â•‘  â•‘
â•‘  â•‘                   ğŸ”´ Business 2                â•‘  â•‘
â•‘  â•‘        ğŸ”´ Business 3                           â•‘  â•‘
â•‘  â•‘                                                 â•‘  â•‘
â•‘  â•‘   [Tap markers for business info]              â•‘  â•‘
â•‘  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚ ğŸ“ BUSINESS LIST (60%) [Scrollable]             â”‚  â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â•‘
â•‘  â”‚ â”‚ [IMG] Restaurant A          ğŸ”µ 0.8 km  â†’  â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       Category: Restaurant                â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       123 Main St                         â”‚  â”‚  â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â•‘
â•‘  â”‚ â”‚ [IMG] Coffee Shop B         ğŸ”µ 1.2 km   â†’  â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       Category: CafÃ©                      â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       456 Oak Ave                         â”‚  â”‚  â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â•‘
â•‘  â”‚ â”‚ [IMG] Store C               ğŸ”µ 2.5 km   â†’  â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       Category: Retail                    â”‚  â”‚  â•‘
â•‘  â”‚ â”‚       789 Pine Rd                         â”‚  â”‚  â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â•‘
â•‘  â”‚                                                 â”‚  â•‘
â•‘  â”‚  [More items below, scroll to see]            â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Legend:
ğŸ”µ = Blue marker/badge (user location or far business)
ğŸ”´ = Red marker (business location)
ğŸ”µ = Green badge (<1km) or Blue badge (â‰¥1km)
â†’ = Tap to navigate
```

## 2. Data Flow Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Firestore DB    â”‚
                    â”‚  (businesses)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ businessList     â”‚
                    â”‚ Provider         â”‚
                    â”‚ (Riverpod)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Google Maps  â”‚        â”‚ Distance Calc    â”‚
        â”‚ (Markers)    â”‚        â”‚ (Haversine)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–²                        â”‚
                â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚ Sorted List    â”‚
                â”‚                â”‚ (by proximity) â”‚
                â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¬â”˜
                
                    RewardsNearbyScreen
                    
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Other Data Sources:                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ LocationService â†’ Current User Position   â”‚
â”‚ â€¢ BusinessModel â†’ Category, Address, Image  â”‚
â”‚ â€¢ authStateProvider â†’ User context          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. Component Interaction Diagram

```
                   RewardsNearbyScreen
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚          â”‚          â”‚
                â–¼          â–¼          â–¼
          [AppBar]   [Map Section]  [List Section]
                â”‚          â”‚          â”‚
                â”‚          â–¼          â”‚
        [My Location]  GoogleMap      â–¼
        [Button]       â”œâ”€Markers      ListView
                       â”‚  â”œâ”€User      â”œâ”€Loading
                       â”‚  â”‚(blue)     â”œâ”€Error
                       â”‚  â””â”€Business  â”œâ”€Empty
                       â”‚   (red)      â””â”€Cards
                       â””â”€Camera

Card Components:
    _BusinessDistanceCard
    â”œâ”€Image
    â”œâ”€Business Info
    â”‚  â”œâ”€Name
    â”‚  â”œâ”€Category
    â”‚  â””â”€Address
    â””â”€Distance Badge
       â”œâ”€Icon
       â””â”€Text
```

## 4. State Management Flow

```
User Opens Screen
        â”‚
        â–¼
Request Location Permission
        â”‚
        â”œâ”€ Granted â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚
        â””â”€ Denied â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
                          â”‚          â”‚
                          â–¼          â–¼
                    Show Error    Get Current
                                  Position
                                    â”‚
                                    â–¼
                              Update State
                              _userPosition
                                    â”‚
                                    â–¼
                          Watch businessListProvider
                                    â”‚
                                    â”œâ”€Loadingâ”€â”€â”€â”€â–¶ Show Loading State
                                    â”‚
                                    â”œâ”€Errorâ”€â”€â”€â”€â”€â”€â–¶ Show Error State
                                    â”‚
                                    â””â”€Dataâ”€â”€â”€â”€â”€â”€â”€â”
                                                 â”‚
                                                 â–¼
                                        Calculate Distances
                                        Using Haversine
                                                 â”‚
                                                 â–¼
                                        Sort by Proximity
                                                 â”‚
                                                 â–¼
                                        Update Markers
                                        on Map
                                                 â”‚
                                                 â–¼
                                        Render List
                                        with Distances
```

## 5. Distance Calculation Pipeline

```
User Position          Business Position
  (lat, lng)             (lat, lng)
     â”‚                       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
   Convert to Radians
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Î”Ï† = (lat2 - lat1) Ã— Ï€/180
   Î”Î» = (lng2 - lng1) Ã— Ï€/180
             â”‚
             â–¼
   Apply Haversine Formula
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   a = sinÂ²(Î”Ï†/2) + cos(Ï†1) Ã— cos(Ï†2) Ã— sinÂ²(Î”Î»/2)
   c = 2 Ã— atan2(âˆša, âˆš(1-a))
   d = R Ã— c  (R = 6371 km)
             â”‚
             â–¼
   Get Distance in km
        ~1.2 km
             â”‚
             â–¼
   Format for Display
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   < 1 km  â†’ "850 m"
   â‰¥ 1 km  â†’ "1.2 km"
             â”‚
             â–¼
   Display with Color Badge
   < 1 km  â†’ ğŸŸ¢ Green
   â‰¥ 1 km  â†’ ğŸ”µ Blue
```

## 6. Navigation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Main Landing Screen (MobileLandingScreen)               â”‚
â”‚ [Home] [Stop Hub] [Boulevard Partners] [Upload] ...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ "Casual Game" NavigationBox
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Casual Games Lobby (CasualGamesLobbyScreen)             â”‚
â”‚ [Available Rewards Nearby] [Mini Game] [Achievements]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ "Available Rewards Nearby" Tile
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Available Rewards Nearby (RewardsNearbyScreen) [NEW]   â”‚
â”‚ â€¢ Map with business markers                             â”‚
â”‚ â€¢ List with distances                                   â”‚
â”‚ â€¢ "My Location" refresh button                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Tap Business Card
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Business Detail Screen (BusinessDetailScreen)          â”‚
â”‚ â€¢ Full business information                             â”‚
â”‚ â€¢ Photos, hours, contact info                           â”‚
â”‚ â€¢ Promotions and loyalty details                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7. Error Handling Flow

```
Action Attempted
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try/Catch Block   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚          â”‚
  Success    Catches
     â”‚        Error
     â–¼           â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  â”‚ Update UI   â”‚â”‚
  â”‚ with Data   â”‚â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Error Type?                 â”‚
            â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
               â”‚          â”‚          â”‚
          Location    Network    Firestore
          Error      Timeout     Error
            â”‚          â”‚          â”‚
            â–¼          â–¼          â–¼
         Show      Show       Show
         Location  Network    Try
         Error     Error      Again
                                â”‚
                                â–¼
                            Retry
                            Button
```

## 8. Widget Tree Structure

```
RewardsNearbyScreen (StatefulWidget)
â”‚
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar
â”‚   â”‚   â”œâ”€â”€ Text: "Available Rewards Nearby"
â”‚   â”‚   â””â”€â”€ IconButton: My Location
â”‚   â”‚
â”‚   â””â”€â”€ Body: Column
â”‚       â”‚
â”‚       â”œâ”€â”€ SizedBox (40% height)
â”‚       â”‚   â””â”€â”€ Stack
â”‚       â”‚       â”œâ”€â”€ GoogleMap
â”‚       â”‚       â”‚   â”œâ”€â”€ CameraPosition
â”‚       â”‚       â”‚   â”œâ”€â”€ Markers (Set<gmf.Marker>)
â”‚       â”‚       â”‚   â””â”€â”€ Gestures
â”‚       â”‚       â”‚
â”‚       â”‚       â””â”€â”€ Loading/Error Overlays
â”‚       â”‚           â”œâ”€â”€ Card (Loading)
â”‚       â”‚           â”‚   â””â”€â”€ CircularProgressIndicator
â”‚       â”‚           â”‚
â”‚       â”‚           â””â”€â”€ Card (Error)
â”‚       â”‚               â””â”€â”€ Error Message + Icon
â”‚       â”‚
â”‚       â”œâ”€â”€ Divider
â”‚       â”‚
â”‚       â””â”€â”€ Expanded (60% height)
â”‚           â””â”€â”€ AsyncValue.when()
â”‚               â”œâ”€â”€ loading: CircularProgressIndicator
â”‚               â”œâ”€â”€ error: Error Message + Retry
â”‚               â””â”€â”€ data: ListView.builder
â”‚                   â””â”€â”€ _BusinessDistanceCard
â”‚                       â”œâ”€â”€ Row
â”‚                       â”‚   â”œâ”€â”€ ClipRRect
â”‚                       â”‚   â”‚   â””â”€â”€ Image
â”‚                       â”‚   â”œâ”€â”€ Expanded
â”‚                       â”‚   â”‚   â””â”€â”€ Column
â”‚                       â”‚   â”‚       â”œâ”€â”€ Text: Name
â”‚                       â”‚   â”‚       â”œâ”€â”€ Row: Category
â”‚                       â”‚   â”‚       â”œâ”€â”€ Row: Address
â”‚                       â”‚   â”‚       â””â”€â”€ Container: Distance Badge
â”‚                       â”‚   â”‚           â””â”€â”€ Row
â”‚                       â”‚   â”‚               â”œâ”€â”€ Icon
â”‚                       â”‚   â”‚               â””â”€â”€ Text
â”‚                       â”‚   â””â”€â”€ Icon: Arrow

```

## 9. Marker Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Map Markers                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  User Marker:                              â”‚
â”‚  â”œâ”€ markerId: "user_location"              â”‚
â”‚  â”œâ”€ position: (lat, lng) [from GPS]        â”‚
â”‚  â”œâ”€ icon: Blue (hueAzure)                  â”‚
â”‚  â”œâ”€ title: "Your Location"                 â”‚
â”‚  â””â”€ onTap: N/A                             â”‚
â”‚                                             â”‚
â”‚  Business Markers:                         â”‚
â”‚  â”œâ”€ markerId: business.id                  â”‚
â”‚  â”œâ”€ position: (lat, lng) [from Firestore]  â”‚
â”‚  â”œâ”€ icon: Red (hueRed)                     â”‚
â”‚  â”œâ”€ title: business.name                   â”‚
â”‚  â”œâ”€ onTap: context.push(detail_screen)     â”‚
â”‚  â””â”€ infoWindow: business.name + category   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 10. Provider Dependency Graph

```
authStateProvider
      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                         â”‚
      â–¼                         â–¼
isAuthenticated         AppRouter setup
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
           businessListProvider
              (Riverpod)
                    â”‚
                    â–¼
    RewardsNearbyScreen watches this
                    â”‚
                    â–¼
           Triggers map/list updates
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚
            â–¼               â–¼
      updateMarkers    updateBusinessList
            â”‚               â”‚
            â–¼               â–¼
         Google Maps    ListView
```

## 11. Color & Design System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Color Palette                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚ ğŸ”µ User Location:                        â”‚
â”‚    Primary Color (usually blue)          â”‚
â”‚    Marker: gmf.BitmapDescriptor.hueAzureâ”‚
â”‚                                          â”‚
â”‚ ğŸ”´ Business Markers:                     â”‚
â”‚    Accent Color (red)                    â”‚
â”‚    Marker: gmf.BitmapDescriptor.hueRed  â”‚
â”‚                                          â”‚
â”‚ ğŸŸ¢ Close Business (< 1 km):              â”‚
â”‚    Green Container.shade100              â”‚
â”‚    Text: Green.shade700                  â”‚
â”‚                                          â”‚
â”‚ ğŸ”µ Far Business (â‰¥ 1 km):                â”‚
â”‚    Blue Container.shade100               â”‚
â”‚    Text: Blue.shade700                   â”‚
â”‚                                          â”‚
â”‚ âšª Background:                           â”‚
â”‚    Material Default                      â”‚
â”‚                                          â”‚
â”‚ ğŸ”˜ Card:                                 â”‚
â”‚    Theme.cardColor                       â”‚
â”‚                                          â”‚
â”‚ ğŸ“ Text:                                 â”‚
â”‚    Primary: Black/Dark                   â”‚
â”‚    Secondary: Grey[600]                  â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 12. Responsive Design

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚  Small Device (480px high)                 â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚ AppBar (56px)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Map (192px - 40%)      [Smaller map]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ List (232px - 60%)     [3-4 cards visible]â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚  Medium Device (720px high)                â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚ AppBar (56px)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Map (288px - 40%)      [Good map view]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ List (376px - 60%)     [5-6 cards visible]â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚  Large Device (1080px high)                â”‚
â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤
â”‚ AppBar (56px)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Map (432px - 40%)      [Large map]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ List (592px - 60%)     [8-10 cards visibleâ”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## 13. Performance Optimization Areas

```
Location Acquisition
â”œâ”€ Request permission: 200ms
â”œâ”€ Get position: 1-3s (GPS dependent)
â””â”€ Update UI: 50ms

Business Data
â”œâ”€ Load from Firestore: 1-2s (cached)
â”œâ”€ Filter invalid coords: 10ms
â””â”€ Calculate distances: 50ms (50 items)

Map Rendering
â”œâ”€ Initial load: 100ms
â”œâ”€ Add markers: 100ms
â”œâ”€ Update camera: 300ms (animation)
â””â”€ Handle interactions: <50ms

List Rendering
â”œâ”€ Build widgets: 50ms
â”œâ”€ Image loading: varies
â”œâ”€ Scroll frame: 16ms (60 FPS)
â””â”€ Distance badge render: <5ms

Total Initial Load: ~2-5 seconds
Subsequent Loads: ~1 second (cached)
```

These diagrams provide a complete visual overview of the "Available Rewards Nearby" feature architecture and flow!
